(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{34:function(e,t,a){},35:function(e,t,a){},69:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);var c={};a.r(c),a.d(c,"getAllCities",(function(){return N})),a.d(c,"setCities",(function(){return g})),a.d(c,"setCity",(function(){return w})),a.d(c,"restartState",(function(){return S}));var r=a(1),n=a.n(r),s=a(17),i=a.n(s),o=a(5),l=a(20),u=a(14),d=a(4),j=a(3),b=a.n(j),h=a(7),v=a(15),O=a.n(v),f=function(){var e=Object(h.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("https://dataservice.accuweather.com/locations/v1/cities/autocomplete?apikey=%09s3CuwXyFEGusav1bh2jSNfEK3TJQFRGx&q=".concat(t)).then((function(e){return e}));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(h.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("https://dataservice.accuweather.com/locations/v1/cities/autocomplete?apikey=%09s3CuwXyFEGusav1bh2jSNfEK3TJQFRGx&q=".concat(t)).then((function(e){return e}));case 3:return a=e.sent,e.abrupt("return",a.data[0]);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(h.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("https://dataservice.accuweather.com/locations/v1/cities/geoposition/search?apikey=%09s3CuwXyFEGusav1bh2jSNfEK3TJQFRGx&q=".concat(t.latitude,"%2C%20").concat(t.longitude)).then((function(e){return e}));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(h.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("https://dataservice.accuweather.com/currentconditions/v1/".concat(t,"?apikey=s3CuwXyFEGusav1bh2jSNfEK3TJQFRGx")).then((function(e){return e}));case 3:return a=e.sent,e.abrupt("return",a.data[0]);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(h.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("https://dataservice.accuweather.com/forecasts/v1/daily/5day/".concat(t,"?apikey=s3CuwXyFEGusav1bh2jSNfEK3TJQFRGx")).then((function(e){return e}));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),N=function(e){return function(){var t=Object(h.a)(b.a.mark((function t(a){var c,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f(e);case 3:if(c=t.sent,r=c.length?c:[]){t.next=8;break}return a({type:"ERROR_GET_CITIES",payload:"There is some problem with the api response"}),t.abrupt("return");case 8:a({type:"GET_CITIES",payload:r}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:"ERROR_GET_CITIES",payload:"There is some problem with the api response"});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()},g=function(e){return function(t){t({type:"SET_CITIES",payload:e.length?e:[]})}},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(){var a=Object(h.a)(b.a.mark((function a(c){var r,n,s,i;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t||!e){a.next=24;break}return a.prev=1,a.next=4,x(e);case 4:return r=a.sent,n=r||{},a.next=8,y(n.Key);case 8:if(s=a.sent,i=s||{},n){a.next=13;break}return c({type:"ERROR_SET_CITY",payload:{error:"Location not found, Please try again later..."}}),a.abrupt("return");case 13:if(s){a.next=16;break}return c({type:"ERROR_SET_CITY",payload:{error:"Location not found, Please try again later..."}}),a.abrupt("return");case 16:c({type:"SET_CITY",payload:{city:n,weather:i}}),a.next=22;break;case 19:a.prev=19,a.t0=a.catch(1),c({type:"ERROR_SET_CITY",payload:{error:a.t0}});case 22:a.next=25;break;case 24:c({type:"ERROR_SET_CITY",payload:{error:t}});case 25:case"end":return a.stop()}}),a,null,[[1,19]])})));return function(e){return a.apply(this,arguments)}}()},S=function(){return function(e){e({type:"RESTART_STATE"})}},T=a(12),E=a(36),C=a.n(E),R=a(0),k=function(e){var t,a,c=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=new Date;switch(e.Day?r.getHours()<23&&r.getHours()>7?(t=e.Day.Icon,a=e.Day.IconPhrase):(t=e.Night.Icon,a=e.Night.IconPhrase):(t=e.icon,a=c),!0){case t<6:return Object(R.jsxs)("div",{className:"icon sunny",children:[Object(R.jsx)("div",{className:"sun",children:Object(R.jsx)("div",{className:"rays"})}),Object(R.jsx)("div",{children:a})]});case t<9:return Object(R.jsxs)("div",{className:"icon sun-shower",children:[Object(R.jsx)("div",{className:"cloud"}),Object(R.jsx)("div",{className:"sun",children:Object(R.jsx)("div",{className:"rays"})}),Object(R.jsx)("div",{className:"rain"}),Object(R.jsx)("div",{children:a})]});case t<11:return Object(R.jsxs)("div",{className:"icon cloudy",children:[Object(R.jsx)("div",{className:"cloud"}),Object(R.jsx)("div",{className:"cloud"}),Object(R.jsx)("div",{children:a})]});case t<14:return Object(R.jsxs)("div",{className:"icon rainy",children:[Object(R.jsx)("div",{className:"cloud"}),Object(R.jsx)("div",{className:"rain"}),Object(R.jsx)("div",{children:a})]});case t<17:return Object(R.jsxs)("div",{className:"icon thunder-storm",children:[Object(R.jsx)("div",{className:"cloud"}),Object(R.jsxs)("div",{className:"lightning",children:[Object(R.jsx)("div",{className:"bolt"}),Object(R.jsx)("div",{className:"bolt"})]}),Object(R.jsx)("div",{children:a})]});case t<19:return Object(R.jsxs)("div",{className:"icon rainy",children:[Object(R.jsx)("div",{className:"cloud"}),Object(R.jsx)("div",{className:"rain"}),Object(R.jsx)("div",{children:a})]});case t<22:return Object(R.jsxs)("div",{className:"icon sun-shower",children:[Object(R.jsx)("div",{className:"cloud"}),Object(R.jsx)("div",{className:"sun",children:Object(R.jsx)("div",{className:"rays"})}),Object(R.jsx)("div",{className:"rain"}),Object(R.jsx)("div",{children:a})]});case t<24:return Object(R.jsxs)("div",{className:"icon flurries",children:[Object(R.jsx)("div",{className:"cloud"}),Object(R.jsxs)("div",{className:"snow",children:[Object(R.jsx)("div",{className:"flake"}),Object(R.jsx)("div",{className:"flake"})]}),Object(R.jsx)("div",{children:a})]});case t<30:return Object(R.jsxs)("div",{className:"icon rainy",children:[Object(R.jsx)("div",{className:"cloud"}),Object(R.jsx)("div",{className:"rain"}),Object(R.jsx)("div",{children:a})]});case t<39:return Object(R.jsxs)("div",{className:"icon cloudy",children:[Object(R.jsx)("div",{className:"cloud"}),Object(R.jsx)("div",{className:"cloud"}),Object(R.jsx)("div",{children:a})]});case t<45:return Object(R.jsxs)("div",{className:"icon rainy",children:[Object(R.jsx)("div",{className:"cloud"}),Object(R.jsx)("div",{className:"rain"}),Object(R.jsx)("div",{children:a})]});default:return Object(R.jsxs)("div",{className:"icon sunny",children:[Object(R.jsx)("div",{className:"sun",children:Object(R.jsx)("div",{className:"rays"})}),Object(R.jsx)("div",{children:a})]})}},I=function(e,t){if(t&&e){var a=5*(e-32)/9,c=5*(t-32)/9;return Object(R.jsxs)("h3",{className:"d-flex justify-content-around",children:[Object(R.jsxs)("span",{children:[Math.floor(a),"\xb0"]}),Object(R.jsxs)("span",{children:[Math.floor(c),"\xb0"]})]})}},_=function(e){var t=new Date(e).getDay();return isNaN(t)?null:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t]},D=function(e,t){var a,c=0;for(a in t){if(t[a].Key===e.Key)return{contain:!0,index:c};c+=1}return{contain:!1,index:c}},F=(a(34),a(35),function(e){var t=e.weather,a=e.city,c=e.error,r=void 0===c?null:c;return r?Object(R.jsx)("div",{className:"container  errContainer",children:Object(R.jsx)("div",{className:"alert alert-danger",role:"alert",children:r})}):Object(R.jsxs)("div",{className:"container text-light forecast",children:[Object(R.jsx)("div",{className:"col-12",children:Object(R.jsx)("h1",{className:"text-center",style:{wordSpacing:"0.3em"},children:a.LocalizedName})}),Object(R.jsx)("div",{className:"row row-cols-1 row-cols-sm-2 row-cols-md-5 g-3",children:t.weatherData.DailyForecasts&&t.weatherData.DailyForecasts.map((function(e){return Object(R.jsx)("div",{className:"col p-2",children:Object(R.jsxs)("div",{className:"container myCard spring-fever",children:[Object(R.jsx)("div",{className:"row justify-content-center",children:k(e)}),I(e.Temperature.Minimum.Value,e.Temperature.Maximum.Value),Object(R.jsx)("h4",{className:"py-3 text-center",children:_(e.Date)})]})},e.Date)}))}),t.weatherData.DailyForecasts&&Object(R.jsxs)("div",{className:"btn-group-vertical mt-3",children:[Object(R.jsx)("button",{className:"btn-save",onClick:function(){return function(e){var t=JSON.parse(localStorage.getItem("favorites"));if(t){if(D(e,t).contain)return;t.push(e),localStorage.setItem("favorites",JSON.stringify(t))}else{var a=[e];localStorage.setItem("favorites",JSON.stringify(a))}}(a)},children:"Save"}),Object(R.jsx)("button",{className:"btn-delete",onClick:function(){return function(e){var t=JSON.parse(localStorage.getItem("favorites"));if(t){var a=D(e,t);return a.contain?(t.splice(a.index,1),void localStorage.setItem("favorites",JSON.stringify(t))):void 0}}(a)},children:"Delete"})]})]})}),G=function(e){var t=e.cities,a=e.getAllCities,c=e.setCity,n=e.weather,s=e.city,i=e.error,o=Object(r.useState)(""),l=Object(T.a)(o,2),u=l[0],d=l[1],j=Object(r.useState)(!1),v=Object(T.a)(j,2),O=v[0],f=v[1];Object(r.useEffect)((function(){!function(e){var t,a,c=function(){var c=Object(h.a)(b.a.mark((function c(r){var n;return b.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=r.coords.latitude,a=r.coords.longitude,c.next=4,p({latitude:t,longitude:a});case 4:(n=c.sent)&&e(n.EnglishName);case 6:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}();navigator.geolocation?navigator.geolocation.getCurrentPosition(c,(function(){e(null,"Unable to retrieve your location, please enable your browser location services")})):e(null,"Geolocation is not supported by your browser")}(c)}),[]),Object(r.useEffect)((function(){n.weatherData?f(!0):f(!1)}),[n]);return Object(R.jsxs)("div",{className:"container",children:[Object(R.jsxs)("div",{className:"row justify-content-center mt-3 mb-3",children:[Object(R.jsx)("div",{className:"col-auto p-0",children:Object(R.jsx)("button",{onClick:function(e){e.preventDefault(),c(u)},className:"btn btn-secondary",style:{height:"2em"},children:"Search"})}),Object(R.jsx)("div",{className:"col-auto p-0 ",style:{zIndex:"9"},children:Object(R.jsx)(C.a,{inputProps:{style:{height:"2em"},placeholder:"Search city"},getItemValue:function(e){return e.LocalizedName},items:t,renderItem:function(e,t){return Object(R.jsx)("div",{style:{background:t?"lightgray":"white"},children:e.LocalizedName},e.Key)},value:u,onChange:function(e){var t;0!==(t=e.target.value).length&&(a(t),d(t))},onSelect:function(e){return d(e)}})})]}),O?Object(R.jsx)(F,{weather:n,city:s,error:i}):Object(R.jsx)("div",{className:"container errContainer",children:Object(R.jsx)("div",{className:"alert alert-danger err",role:"alert",children:i})})]})},A=(a(69),function(e){var t=e.restartState;return Object(R.jsx)("nav",{className:"navbar navbar-light bg-light header",children:Object(R.jsxs)("div",{className:"container-fluid",children:[Object(R.jsx)(u.b,{onClick:function(){return t()},to:"/",style:{fontWeight:"bold",color:"black",fontFamily:["Audiowide","sans-serif"],textDecoration:"none",fontSize:"2em"},children:"EW"}),Object(R.jsx)(u.b,{onClick:function(){return t()},to:"/",style:{fontWeight:"bold",color:"black",fontFamily:["Audiowide","sans-serif"],textDecoration:"none",fontSize:"1em"},children:"Search"}),Object(R.jsx)(u.b,{to:"/favorites",style:{fontWeight:"bold",color:"black",fontFamily:["Audiowide","sans-serif"],textDecoration:"none",fontSize:"1em"},children:"Favorites"})]})})}),J=function(e){var t=e.countryName,a=e.cityName,c=e.cityKey,n=Object(r.useState)(null),s=Object(T.a)(n,2),i=s[0],o=s[1],l=Object(r.useState)(null),u=Object(T.a)(l,2),d=u[0],j=u[1],v=Object(r.useState)(null),O=Object(T.a)(v,2),f=O[0],x=O[1];return Object(r.useEffect)((function(){(function(){var e=Object(h.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(c);case 2:(t=e.sent)&&(o(t.WeatherIcon),j(t.Temperature.Metric.Value),x(t.WeatherText));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(R.jsxs)("div",{className:"container myCard spring-fever",children:[Object(R.jsx)("div",{className:"row justify-content-center",children:k({icon:i},f)}),Object(R.jsxs)("h2",{className:"text-center",children:[d,"\xb0"]}),Object(R.jsx)("h4",{className:"py-3 text-center",children:a}),Object(R.jsx)("h5",{className:"py-3 text-center",children:t})]})},K=function(e){var t=e.setCity,a=Object(r.useState)({}),c=Object(T.a)(a,2),n=c[0],s=c[1],i=Object(r.useState)(null),o=Object(T.a)(i,2),l=o[0],u=o[1],j=Object(d.f)();Object(r.useEffect)((function(){var e=JSON.parse(localStorage.getItem("favorites"));e&&e.length?s(e):u("there is no favorites locations")}),[]);return l?Object(R.jsx)("div",{className:"container  errContainer",children:Object(R.jsx)("div",{className:"alert alert-danger err",role:"alert",children:l})}):Object(R.jsx)("div",{className:"container text-white mt-3",children:Object(R.jsx)("div",{className:"row",children:n.length&&n.map((function(e){return Object(R.jsx)("div",{className:"col-12 col-sm-6 col-md-4 mb-3",onClick:function(){return function(e){t(e),j.push("/")}(e)},children:Object(R.jsx)(J,{countryName:e.Country.LocalizedName,cityName:e.LocalizedName,cityKey:e.Key})},e.Key)}))})})};var W=Object(o.a)({},c),z=Object(l.b)((function(e){return{cities:e.cities.cities,city:e.cities.city,weather:e.weather,citiesError:e.cities.error}}),W)((function(e){var t=e.getAllCities,a=e.setCity,c=e.setWeather,r=e.weather,n=e.cities,s=e.city,i=e.citiesError,o=e.restartState;return Object(R.jsxs)(u.a,{children:[Object(R.jsx)(A,{restartState:o}),Object(R.jsxs)(d.c,{children:[Object(R.jsx)(d.a,{exact:!0,path:"/",children:Object(R.jsx)(G,{cities:n,getAllCities:t,setCity:a,setWeather:c,weather:r,city:s,error:i,restartState:o})}),Object(R.jsx)(d.a,{path:"/favorites",children:Object(R.jsx)(K,{setCity:a})})]})]})})),M=a(16),Y=a(37),L=a(38),P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{weatherData:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CITY":return Object(o.a)(Object(o.a)({},e),{},{weatherData:t.payload.weather});case"RESTART_STATE":return Object(o.a)(Object(o.a)({},e),{},{weatherData:{}});default:return e}},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cities:[],city:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_CITIES":return Object(o.a)(Object(o.a)({},e),{},{cities:t.payload});case"SET_CITY":return Object(o.a)(Object(o.a)({},e),{},{city:t.payload.city,error:null});case"ERROR_SET_CITY":case"ERROR_GET_CITIES":return Object(o.a)(Object(o.a)({},e),{},{error:t.payload.error});case"RESTART_STATE":return Object(o.a)(Object(o.a)({},e),{},{city:{},cites:[],error:null});default:return e}},X=Object(M.combineReducers)({weather:P,cities:Q}),V=Object(M.createStore)(X,Object(L.composeWithDevTools)(Object(M.applyMiddleware)(Y.a)));i.a.render(Object(R.jsx)(n.a.StrictMode,{children:Object(R.jsx)(l.a,{store:V,children:Object(R.jsx)(z,{})})}),document.getElementById("root"))}},[[71,1,2]]]);
//# sourceMappingURL=main.a571ab5a.chunk.js.map